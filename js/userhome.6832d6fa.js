(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["userhome"],{1010:function(t,e,r){"use strict";r.r(e);var a=function(){var t=this,e=t.$createElement,r=t._self._c||e;return r("div",{attrs:{id:"userhome"}},[r("h1",{staticClass:"management-title"},[t._v("個人頁面設定")]),r("div",{staticClass:"user-container"},[r("p",{staticClass:"cover-now"},[t._v("✦ 目前封面")]),r("img",{staticClass:"cover-picture",attrs:{src:t.coverpictute}}),r("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[r("b-field",{attrs:{label:"✦ 封面設定","label-for":"illustrator-headshot"}},[r("b-upload",{attrs:{id:"illustrator-headshot","drag-drop":"",expanded:""},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}},[r("section",{staticClass:"section"},[r("div",{staticClass:"content has-text-centered"},[r("p",[r("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),r("p",[t._v(" 點選或拖曳上傳圖片"),r("br")])])])])],1),t.form.image?r("span",{staticClass:"tag is-primary"},[t._v(t._s(t.form.image.name))]):t._e(),r("b-field",{attrs:{label:"✦ 繪師","label-for":"illustrator-name"}},[r("b-input",{attrs:{id:"illustrator-name",placeholder:"請輸入繪師名稱",maxlength:"10"},model:{value:t.form.illustrator,callback:function(e){t.$set(t.form,"illustrator",e)},expression:"form.illustrator"}})],1),r("input",{staticClass:"button is-success submit",attrs:{type:"submit",value:"儲存設定",disabled:t.submitting}})],1)])])},s=[],i=r("1da1"),n=(r("96cf"),{data:function(){return{submitting:!1,form:{image:null,illustrator:""},coverpictute:null}},methods:{submit:function(t){var e=this;return Object(i["a"])(regeneratorRuntime.mark((function r(){var a,s,i,n;return regeneratorRuntime.wrap((function(r){while(1)switch(r.prev=r.next){case 0:for(s in t.preventDefault(),e.submitting=!0,a=new FormData,e.form)"_id"!==s&&a.append(s,e.form[s]);return r.next=6,e.api.patch("users/cover",a,{headers:{authorization:"Bearer "+e.user.token}});case 6:i=r.sent,n=i.data,e.form.image=null,e.coverpictute=n.result.coverpicture,e.form.illustrator=n.result.coverIllustrator,e.submitting=!1;case 12:case"end":return r.stop()}}),r)})))()}},created:function(){var t=this;return Object(i["a"])(regeneratorRuntime.mark((function e(){var r,a;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.user.token.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.api.get("/users/me",{headers:{authorization:"Bearer "+t.user.token}});case 5:r=e.sent,a=r.data,t.coverpictute=a.result.coverpicture,t.form.illustrator=a.result.coverIllustrator,e.next=14;break;case 11:e.prev=11,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:"取得資料失敗"});case 14:case"end":return e.stop()}}),e,null,[[2,11]])})))()}}),o=n,u=r("2877"),l=Object(u["a"])(o,a,s,!1,null,null,null);e["default"]=l.exports}}]);
//# sourceMappingURL=userhome.6832d6fa.js.map