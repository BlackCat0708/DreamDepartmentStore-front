(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["illustratormyinfo"],{"1c8c":function(t,e,a){t.exports=a.p+"img/facebook-square-brands.fc8432aa.svg"},"2baa":function(t,e,a){t.exports=a.p+"img/pixiv.1cc0b112.svg"},"8f81":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{attrs:{id:"illustratormyinfo"}},[s("h1",{staticClass:"management-title"},[t._v("基本資料")]),s("div",{staticClass:"myinfo-container"},[s("form",{staticClass:"form",on:{submit:function(e){return e.preventDefault(),t.submit.apply(null,arguments)}}},[s("b-field",{attrs:{label:"✦ 暱稱","label-for":"illustrator-nickname",message:"最多可輸入 10 個字"}},[s("b-input",{attrs:{id:"illustrator-nickname",placeholder:"請輸入暱稱",maxlength:"10"},model:{value:t.form.nickname,callback:function(e){t.$set(t.form,"nickname",e)},expression:"form.nickname"}})],1),s("b-field",{attrs:{label:"✦ 大頭貼設定","label-for":"illustrator-headshot"}},[s("b-upload",{attrs:{id:"illustrator-headshot","drag-drop":"",expanded:""},model:{value:t.form.image,callback:function(e){t.$set(t.form,"image",e)},expression:"form.image"}},[s("section",{staticClass:"section"},[s("div",{staticClass:"content has-text-centered"},[s("p",[s("b-icon",{attrs:{icon:"upload",size:"is-large"}})],1),s("p",[t._v(" 點選或拖曳上傳圖片"),s("br")])])])])],1),t.form.image?s("span",{staticClass:"tag is-primary"},[t._v(t._s(t.form.image.name))]):t._e(),s("b-field",{attrs:{label:"✦ 自我介紹","label-for":"illustrator-selfIntroduction"}},[s("b-input",{attrs:{id:"illustrator-selfIntroduction",type:"textarea"},model:{value:t.form.selfIntroduction,callback:function(e){t.$set(t.form,"selfIntroduction",e)},expression:"form.selfIntroduction"}})],1),s("input",{staticClass:"button is-success submit",attrs:{type:"submit",value:"儲存設定",disabled:t.submitting}})],1),s("div",{staticClass:"title-plus"},[s("h1",{staticClass:"management-title"},[t._v("社群媒體")]),s("b-button",{staticClass:"is-success",on:{click:function(e){t.openModal=!0}}},[t._v("新增")])],1),s("b-table",{ref:"table",attrs:{data:t.websites,striped:!0,hoverable:!0},scopedSlots:t._u([{key:"empty",fn:function(){return[s("div",{staticClass:"has-text-centered"},[t._v("請新增社群媒體")])]},proxy:!0}])},[s("b-table-column",{attrs:{width:"200"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"website-category"},["個人網站"===e.row.category?s("b-icon",{attrs:{pack:"fas",icon:"house-user"}}):t._e(),"Facebook"===e.row.category?s("img",{staticClass:"svg",attrs:{src:a("1c8c")}}):t._e(),"Plurk"===e.row.category?s("img",{staticClass:"svg",attrs:{src:a("a3df")}}):t._e(),"Twitter"===e.row.category?s("img",{staticClass:"svg",attrs:{src:a("b1b8")}}):t._e(),"pixiv"===e.row.category?s("img",{staticClass:"svg",attrs:{src:a("2baa")}}):t._e(),"email"===e.row.category?s("b-icon",{attrs:{pack:"fas",icon:"envelope"}}):t._e(),"其他"===e.row.category?s("b-icon",{attrs:{pack:"fas",icon:"link"}}):t._e(),s("span",{staticClass:"website-name"},[t._v(t._s(e.row.category))])],1)]}}])}),s("b-table-column",{scopedSlots:t._u([{key:"default",fn:function(e){return[s("span",{staticClass:"my-website"},[t._v(t._s(e.row.website))])]}}])}),s("b-table-column",{attrs:{width:"100"},scopedSlots:t._u([{key:"default",fn:function(e){return[s("div",{staticClass:"td-buttons"},[s("b-button",{staticClass:"edit",on:{click:function(a){return t.editWebsite(e.index)}}},[s("b-icon",{attrs:{pack:"fas",icon:"pen"}})],1),s("b-button",{staticClass:"delete is-danger",on:{click:function(a){return t.deleteWebsite(e.index)}}},[s("b-icon",{attrs:{pack:"fas",icon:"xmark"}})],1)],1)]}}])})],1)],1),s("b-modal",{attrs:{width:"700px",scroll:"keep"},on:{close:t.resetModal},model:{value:t.openModal,callback:function(e){t.openModal=e},expression:"openModal"}},[s("div",{staticClass:"normal-form"},[s("div",{staticClass:"modal-red"},[s("h1",[t._v("新增社群媒體")])]),s("div",{staticClass:"modal-white"},[s("form",{staticClass:"form-group",on:{submit:function(e){return e.preventDefault(),t.submitModal.apply(null,arguments)}}},[s("b-field",[s("b-select",{attrs:{placeholder:"請選擇"},model:{value:t.modal.category,callback:function(e){t.$set(t.modal,"category",e)},expression:"modal.category"}},[s("option",{attrs:{value:"",disabled:""}},[t._v("請選擇")]),s("option",{attrs:{value:"個人網站"}},[t._v("個人網站")]),s("option",{attrs:{value:"pixiv"}},[t._v("pixiv")]),s("option",{attrs:{value:"Plurk"}},[t._v("Plurk")]),s("option",{attrs:{value:"Twitter"}},[t._v("Twitter")]),s("option",{attrs:{value:"Facebook"}},[t._v("Facebook")]),s("option",{attrs:{value:"email"}},[t._v("email")]),s("option",{attrs:{value:"其他"}},[t._v("其他")])])],1),s("b-input",{attrs:{placeholder:"請輸入網址"},model:{value:t.modal.website,callback:function(e){t.$set(t.modal,"website",e)},expression:"modal.website"}}),s("div",{staticClass:"buttons"},[s("b-button",{staticClass:"is-dark",attrs:{disabled:t.modalSubmitting},on:{click:t.resetModal}},[t._v("取消")]),s("input",{staticClass:"button is-success submit",attrs:{type:"submit",value:"送出",disabled:t.modalSubmitting}})],1)],1)])])])],1)},r=[],i=a("5530"),n=a("1da1"),o=(a("a434"),a("96cf"),{data:function(){return{openModal:!1,submitting:!1,modalSubmitting:!1,form:{nickname:"",image:null,selfIntroduction:""},modal:{category:"",website:"",_id:"",index:-1},websites:[]}},methods:{submit:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(t.preventDefault(),0!==e.form.nickname.length){a.next=4;break}return e.$swal({icon:"error",title:"錯誤",text:"請輸入暱稱"}),a.abrupt("return");case 4:for(r in e.submitting=!0,s=new FormData,e.form)"_id"!==r&&s.append(r,e.form[r]);e.$store.dispatch("user/editInfo",s),e.form=Object(i["a"])(Object(i["a"])({},e.form),{},{image:null}),e.submitting=!1;case 10:case"end":return a.stop()}}),a)})))()},resetModal:function(t){this.modalSubmitting?t.preventDefault():(this.modal={category:"",website:"",_id:"",index:-1},this.openModal=!1)},submitModal:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){var s,r;return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:if(0!==e.user.token.length){a.next=4;break}return e.$swal({icon:"error",title:"錯誤",text:"請先登入"}),e.$router.push("/"),a.abrupt("return");case 4:if(t.preventDefault(),0!==e.modal.category.length&&0!==e.modal.website.length){a.next=8;break}return e.$swal({icon:"error",title:"錯誤",text:"缺少必填欄位"}),a.abrupt("return");case 8:if(e.modalSubmitting=!0,a.prev=9,!(e.modal.index<0)){a.next=19;break}return a.next=13,e.api.post("/users/websites",{category:e.modal.category,website:e.modal.website},{headers:{authorization:"Bearer "+e.user.token}});case 13:s=a.sent,r=s.data,e.websites.push(r.result),e.$swal({icon:"success",title:"成功",text:"成功新增社群媒體"}),a.next=24;break;case 19:return a.next=21,e.api.patch("/users/websites",{_id:e.modal._id,category:e.modal.category,website:e.modal.website},{headers:{authorization:"Bearer "+e.user.token}});case 21:e.websites[e.modal.index]=Object(i["a"])({},e.modal),e.$refs.table.resetMultiSorting(),e.$swal({icon:"success",title:"成功",text:"更新成功"});case 24:e.modal={category:"",website:"",index:-1},e.openModal=!1,a.next=31;break;case 28:a.prev=28,a.t0=a["catch"](9),e.$swal({icon:"error",title:"錯誤",text:"失敗"});case 31:e.modalSubmitting=!1;case 32:case"end":return a.stop()}}),a,null,[[9,28]])})))()},editWebsite:function(t){this.modal=Object(i["a"])(Object(i["a"])({},this.websites[t]),{},{index:t}),this.openModal=!0},deleteWebsite:function(t){var e=this;return Object(n["a"])(regeneratorRuntime.mark((function a(){return regeneratorRuntime.wrap((function(a){while(1)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,e.api.delete("/users/websites/"+e.websites[t]._id,{headers:{authorization:"Bearer "+e.user.token}});case 3:e.websites.splice(t,1),e.$swal({icon:"success",title:"成功",text:"刪除成功"}),a.next=10;break;case 7:a.prev=7,a.t0=a["catch"](0),e.$swal({icon:"error",title:"錯誤",text:"刪除失敗"});case 10:case"end":return a.stop()}}),a,null,[[0,7]])})))()}},created:function(){var t=this;return Object(n["a"])(regeneratorRuntime.mark((function e(){var a,s;return regeneratorRuntime.wrap((function(e){while(1)switch(e.prev=e.next){case 0:if(0!==t.user.token.length){e.next=2;break}return e.abrupt("return");case 2:return e.prev=2,e.next=5,t.api.get("/users/me",{headers:{authorization:"Bearer "+t.user.token}});case 5:a=e.sent,s=a.data,t.form.nickname=s.result.nickname,t.form.image=null,t.form.selfIntroduction=s.result.selfIntroduction,t.websites=s.result.websites,e.next=16;break;case 13:e.prev=13,e.t0=e["catch"](2),t.$swal({icon:"error",title:"錯誤",text:"取得資料失敗"});case 16:case"end":return e.stop()}}),e,null,[[2,13]])})))()}}),l=o,c=a("2877"),u=Object(c["a"])(l,s,r,!1,null,null,null);e["default"]=u.exports},a3df:function(t,e,a){t.exports=a.p+"img/plurk.8bda8ed6.svg"},a434:function(t,e,a){"use strict";var s=a("23e7"),r=a("da84"),i=a("23cb"),n=a("5926"),o=a("07fa"),l=a("7b0b"),c=a("65f0"),u=a("8418"),d=a("1dde"),b=d("splice"),m=r.TypeError,p=Math.max,f=Math.min,v=9007199254740991,g="Maximum allowed length exceeded";s({target:"Array",proto:!0,forced:!b},{splice:function(t,e){var a,s,r,d,b,w,h=l(this),k=o(h),x=i(t,k),_=arguments.length;if(0===_?a=s=0:1===_?(a=0,s=k-x):(a=_-2,s=f(p(n(e),0),k-x)),k+a-s>v)throw m(g);for(r=c(h,s),d=0;d<s;d++)b=x+d,b in h&&u(r,d,h[b]);if(r.length=s,a<s){for(d=x;d<k-s;d++)b=d+s,w=d+a,b in h?h[w]=h[b]:delete h[w];for(d=k;d>k-s+a;d--)delete h[d-1]}else if(a>s)for(d=k-s;d>x;d--)b=d+s-1,w=d+a-1,b in h?h[w]=h[b]:delete h[w];for(d=0;d<a;d++)h[d+x]=arguments[d+2];return h.length=k-s+a,r}})},b1b8:function(t,e,a){t.exports=a.p+"img/twitter-brands.c0bc2186.svg"}}]);
//# sourceMappingURL=illustratormyinfo.b5594870.js.map